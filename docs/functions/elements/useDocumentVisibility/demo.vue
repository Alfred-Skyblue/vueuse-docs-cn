<script setup lang="ts">
import { ref, watch } from 'vue'
import { useDocumentVisibility, useTimeoutFn } from '@vueuse/core'

const startMessage = 'ğŸ’¡ æœ€å°åŒ–é¡µé¢æˆ–åˆ‡æ¢æ ‡ç­¾ç„¶åè¿”å›'
const message = ref(startMessage)
const visibility = useDocumentVisibility()

const timeout = useTimeoutFn(() => {
  message.value = startMessage
}, 3000)

watch(visibility, (current, previous) => {
  if (current === 'visible' && previous === 'hidden') {
    message.value = 'ğŸ‰ æ¬¢è¿å›æ¥!'
    timeout.start()
  }
})
</script>

<template>
  <div>{{ message }}</div>
</template>
